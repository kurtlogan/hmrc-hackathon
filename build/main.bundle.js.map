{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/speech-to-text/controls.js","webpack:///./src/constants.js","webpack:///./src/calibration/controls.js","webpack:///./src/speech-to-text/onend.js","webpack:///./src/speech-to-text/onerror.js","webpack:///./src/tabbable/index.js","webpack:///./src/speech-to-text/onresult.js","webpack:///./src/speech-to-text/onstart.js","webpack:///./src/webgazer/precision_store_points.js","webpack:///./src/webgazer/setup.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","recog","startSpeechText","element","continuous","interim","stopSpeechText","webkitSpeechRecognition","interimResults","onstart","_onstart2","default","onerror","_onerror2","onresult","_onresult2","onend","_onend2","lang","start","stop","setBodyListener","document","body","enableSpeechNavigation","textField","dot","running","dotTop","parseInt","style","top","dotLeft","left","counter","dir","cleanup","removeChild","undefined","webgazer","createElement","innerText","position","appendChild","width","height","backgroundColor","borderRadius","updateDotPosition","setTimeout","window","innerWidth","innerHeight","recordScreenPosition","_controls","console","log","el","options","candidate","candidateIndex","elementDocument","ownerDocument","basicTabbables","orderedTabbables","isUnavailable","isOffCache","node","documentElement","computedStyle","defaultView","getComputedStyle","isOff","nodeComputedStyle","length","result","display","parentNode","push","visibility","createIsUnavailable","candidateSelectors","candidates","querySelectorAll","join","includeContainer","matches","Element","msMatchesSelector","webkitMatchesSelector","some","candidateSelector","Array","slice","apply","unshift","getAttribute","tabIndex","tagName","type","disabled","index","tabbableNodes","sort","a","b","map","_index","currentIndex","lastResult","event","resultIndex","results","transcript","temp","replace","word","keywords","find","indexOf","key","action","tabs","_index2","nextIndex","focus","scrollBy","click","border","history","back","store_points_var","xPast50","yPast50","store_points_variable","stop_storing_points_variable","store_points","x","y","k","get_points","past50","_precision_store_points","_precision_store_points2","canvas","getElementById","setRegression","setTracker","setGazeListener","data","clock","begin","removeMouseEventListeners","showPredictionPoints","setup","video","margin","background","params","imgWidth","imgHeight","overlay","id","faceOverlay","cl","getTracker","clm","drawLoop","requestAnimFrame","getContext","clearRect","getCurrentPosition","draw","checkIfReady","isReady","onload","_constants2","speechRunner","webgazerRunner","Error","_setup2","querySelector","addEventListener","_controls3","speechToTextElements","_loop","onfocus","onblur"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import onstart from './onstart'\nimport onresult from './onresult'\nimport onerror from './onerror'\nimport onend from './onend'\n\nlet recog\n\nlet startSpeechText = (element, continuous, interim) => {\n  if(recog) { stopSpeechText(); }\n\n  recog = new webkitSpeechRecognition();\n  recog.continuous = continuous;\n  recog.interimResults = interim;\n\n  recog.onstart = onstart(element);\n  recog.onerror = onerror(element);\n  recog.onresult = onresult(element);\n  recog.onend = onend(element);\n\n  recog.lang = \"en-GB\";\n  recog.start();\n\n  return recog;\n}\n\nlet stopSpeechText = () => {\n  recog.stop();\n}\n\nlet setBodyListener = () => {\n  startSpeechText(document.body, true, true);\n}\n\nexport { startSpeechText, stopSpeechText, setBodyListener }\n","let enableSpeechNavigation = true;\n\nexport default { enableSpeechNavigation }\n","let textField;\nlet dot;\nlet running = false;\n\nlet dotTop = () => dot ? parseInt(dot.style.top) : 0\nlet dotLeft = () => dot ? parseInt(dot.style.left) : 0\n\nlet speed = 15;\nlet maxIterations = 4\nlet counter = 0;\n\nlet spawnRedDot = () => {\n  if (!dot) {\n    dot = document.createElement('div');\n    dot.style.width = \"20px\"\n    dot.style.height = \"20px\"\n    dot.style.position = 'fixed'\n    dot.style.left = \"10px\"\n    dot.style.top = \"10px\"\n    dot.style.backgroundColor = 'red'\n    dot.style.borderRadius = '50%'\n\n    document.body.appendChild(dot)\n  }\n\n  return dot\n}\n\nlet dir = \"right\"\nlet updateDotPosition = (webgazer) => () => {\n  if(counter >= maxIterations) {\n    dot.style.backgroundColor = 'green'\n    setTimeout(cleanup, 2500)\n    return;\n  }\n\n  if(dot) {\n    if(dotLeft() >= window.innerWidth - 50 && dir == \"right\") {\n      dir = \"down\"\n      counter++\n    } else if(dotTop() >= window.innerHeight - 50 && dir == \"down\") {\n      dir = \"left\"\n      counter++\n    } else if(dotLeft() <= 10 && dir == \"left\") {\n      dir = \"up\"\n      counter++\n    } else if(dotTop() <= 10 && dir == \"up\") {\n      dir = \"right\"\n      counter++\n    }\n\n    switch (dir) {\n      case \"right\": dot.style.left = (dotLeft() + speed) + \"px\"; break;\n      case \"down\": dot.style.top = (dotTop() + speed) + \"px\"; break;\n      case \"left\": dot.style.left = (dotLeft() - speed) + \"px\"; break;\n      case \"up\": dot.style.top = (dotTop() - speed) + \"px\"; break;\n    }\n\n    webgazer.recordScreenPosition(dotLeft(), dotTop())\n  }\n\n  setTimeout(updateDotPosition(webgazer), 75)\n}\n\nlet cleanup = () => {\n  running = false;\n  counter = 0;\n  document.body.removeChild(textField);\n  document.body.removeChild(dot);\n  textField = undefined\n  dot = undefined\n}\n\nexport default (webgazer) => () => {\n  if(!running) {\n    running = true;\n\n    if(!textField) {\n      textField = document.createElement(\"div\")\n      textField.innerText = \"Stare at the red dot, follow it with you eyes until it turns green\"\n      textField.style.position = \"fixed\"\n      textField.style.top = \"50%\"\n      textField.style.left = \"50%\"\n\n      document.body.appendChild(textField);\n    }\n\n    spawnRedDot()\n    updateDotPosition(webgazer)()\n  }\n}\n","import { setBodyListener } from './controls'\n\nexport default (element) => () => {\n  console.log(\"ending listener\", element)\n  if(element != document.body) {\n    console.log(\"setup body listener\")\n    setBodyListener()\n  }\n}\n","export default (element) => () => {}\n","export default function(el, options) {\n  options = options || {};\n\n  var elementDocument = el.ownerDocument || el;\n  var basicTabbables = [];\n  var orderedTabbables = [];\n\n  // A node is \"available\" if\n  // - it's computed style\n  var isUnavailable = createIsUnavailable(elementDocument);\n\n  var candidateSelectors = [\n    'input',\n    'select',\n    'a[href]',\n    'textarea',\n    'button',\n    '[tabindex]',\n  ];\n\n  var candidates = el.querySelectorAll(candidateSelectors.join(','));\n\n  if (options.includeContainer) {\n    var matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n    if (\n      candidateSelectors.some(function(candidateSelector) {\n        return matches.call(el, candidateSelector);\n      })\n    ) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var candidate, candidateIndex;\n  for (var i = 0, l = candidates.length; i < l; i++) {\n    candidate = candidates[i];\n    candidateIndex = parseInt(candidate.getAttribute('tabindex'), 10) || candidate.tabIndex;\n\n    if (\n      candidateIndex < 0\n      || (candidate.tagName === 'INPUT' && candidate.type === 'hidden')\n      || candidate.disabled\n      || isUnavailable(candidate, elementDocument)\n    ) {\n      continue;\n    }\n\n    if (candidateIndex === 0) {\n      basicTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        index: i,\n        tabIndex: candidateIndex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(function(a, b) {\n      return a.tabIndex === b.tabIndex ? a.index - b.index : a.tabIndex - b.tabIndex;\n    })\n    .map(function(a) {\n      return a.node\n    });\n\n  Array.prototype.push.apply(tabbableNodes, basicTabbables);\n\n  return tabbableNodes;\n}\n\nfunction createIsUnavailable(elementDocument) {\n  // Node cache must be refreshed on every check, in case\n  // the content of the element has changed\n  var isOffCache = [];\n\n  // \"off\" means `display: none;`, as opposed to \"hidden\",\n  // which means `visibility: hidden;`. getComputedStyle\n  // accurately reflects visiblity in context but not\n  // \"off\" state, so we need to recursively check parents.\n\n  function isOff(node, nodeComputedStyle) {\n    if (node === elementDocument.documentElement) return false;\n\n    // Find the cached node (Array.prototype.find not available in IE9)\n    for (var i = 0, length = isOffCache.length; i < length; i++) {\n      if (isOffCache[i][0] === node) return isOffCache[i][1];\n    }\n\n    nodeComputedStyle = nodeComputedStyle || elementDocument.defaultView.getComputedStyle(node);\n\n    var result = false;\n\n    if (nodeComputedStyle.display === 'none') {\n      result = true;\n    } else if (node.parentNode) {\n      result = isOff(node.parentNode);\n    }\n\n    isOffCache.push([node, result]);\n\n    return result;\n  }\n\n  return function isUnavailable(node) {\n    if (node === elementDocument.documentElement) return false;\n\n    var computedStyle = elementDocument.defaultView.getComputedStyle(node);\n\n    if (isOff(node, computedStyle)) return true;\n\n    return computedStyle.visibility === 'hidden';\n  }\n}\n","import tabbable from '../tabbable/index'\nimport { startSpeechText, setBodyListener } from './controls'\n\nlet currentIndex = -1;\nlet lastResult = \"\"\n\nexport default (element) => (event) => {\n  var interim = '';\n\n  for(var i = event.resultIndex; i < event.results.length; ++i) {\n    interim += event.results[i][0].transcript;\n  }\n\n  if(element == document.body) {\n    let temp = interim;\n    interim = interim.replace(lastResult, \"\");\n    lastResult = temp;\n\n    var word = keywords.find(i => interim.indexOf(i.key) > -1)\n\n    if(word)\n    {\n      console.log(word.key);\n      word.action();\n      setBodyListener();\n    }\n  } else {\n    element.value = interim;\n  }\n}\n\nlet keywords = [\n  {\n    key: \"next\",\n    action: () => {\n      let tabs = tabbable(document.body)\n      let nextIndex = ++currentIndex\n\n      if(nextIndex > tabs.length - 1) {\n        currentIndex = nextIndex = 0\n      }\n\n      tabs[nextIndex].focus();\n    }\n  }, {\n    key: \"previous\",\n    action: () => {\n      let tabs = tabbable(document.body)\n      let nextIndex = --currentIndex\n\n      if(nextIndex < 0) {\n        currentIndex = nextIndex = tabs.length - 1\n      }\n\n      tabs[nextIndex].focus();\n    }\n  }, {\n    key: \"up\",\n    action: () => {\n      window.scrollBy(0, -200)\n    }\n  }, {\n    key: \"down\",\n    action: () => {\n      window.scrollBy(0, 200)\n    }\n  }, {\n    key: \"click\",\n    action: () => {\n      let element = tabbable(document.body)[currentIndex]\n\n      if(element) {\n        element.click()\n      }\n    }\n  }, {\n    key: \"edit\",\n    action: () => {\n      let element = tabbable(document.body)[currentIndex]\n\n      if(element) {\n        element.focus();\n        element.style.border = \"1px solid yellow\"\n        startSpeechText(element, false);\n      }\n    }\n  }, {\n    key: \"back\",\n    action: () => window.history.back()\n  }\n\n\n]\n","export default (element) => () => {}\n","export default (window) => {\n  window.store_points_var = false;\n  window.xPast50 = new Array(50);\n  window.yPast50 = new Array(50);\n\n  /*\n   * Sets store_points to true, so all the occuring prediction\n   * points are stored\n   */\n  window.store_points_variable = function(){\n    store_points_var = true;\n  }\n\n  /*\n   * Sets store_points to false, so prediction points aren't\n   * stored any more\n   */\n  window.stop_storing_points_variable = function(){\n    store_points_var = false;\n  }\n\n  /*\n   * Stores the position of the fifty most recent tracker preditions\n   */\n  window.store_points = function(x, y, k) {\n    xPast50[k] = x;\n    yPast50[k] = y;\n  }\n\n  /*\n   * Returns the stored tracker prediction points\n   */\n  window.get_points = function() {\n    var past50 = new Array(2);\n    past50[0] = xPast50;\n    past50[1] = yPast50;\n    return past50;\n  }\n}\n","import precision_store_points from './precision_store_points'\n\nexport default (window, webgazer) => {\n  precision_store_points(window);\n\n  var canvas = document.getElementById(\"plotting_canvas\");\n\n  if(canvas) {\n    //start the webgazer tracker\n     webgazer.setRegression('ridge') /* currently must set regression and tracker */\n         .setTracker('clmtrackr')\n         .setGazeListener(function(data, clock) {\n           //   console.log(data); /* data is an object containing an x and y key which are the x and y prediction coordinates (no bounds limiting) */\n           //   console.log(clock); /* elapsed time in milliseconds since webgazer.begin() was called */\n         })\n         .begin()\n         .removeMouseEventListeners()\n         .showPredictionPoints(true); /* shows a square every 100 milliseconds where current prediction is */\n\n     var width = 320;\n     var height = 240;\n     var topDist = '0px';\n     var leftDist = '0px';\n\n     //Set up the webgazer video feedback.\n     var setup = function() {\n         //Set up video variable to store the camera feedback\n         var video = document.getElementById('webgazerVideoFeed');\n\n         //Position the camera feedback to the top left corner.\n         video.style.display = 'block';\n         video.style.position = 'fixed';\n         video.style.top = topDist;\n         video.style.left = leftDist;\n\n         //Set up the video feedback box size\n         video.width = width;\n         video.height = height;\n         video.style.margin = '0px';\n         video.style.background = '#222222';\n         webgazer.params.imgWidth = width;\n         webgazer.params.imgHeight = height;\n\n         //Set up the main canvas. The main canvas is used to calibrate the webgazer.\n         var overlay = document.createElement('canvas');\n         overlay.id = 'overlay';\n\n         //Setup the size of canvas\n         overlay.style.position = 'fixed';\n         overlay.width = width;\n         overlay.height = height;\n         overlay.style.top = topDist;\n         overlay.style.left = leftDist;\n         overlay.style.margin = '0px';\n\n         //Draw the face overlay on the camera video feedback\n         var faceOverlay = document.createElement('face_overlay');\n         faceOverlay.id = 'faceOverlay';\n         faceOverlay.style.position = 'fixed';\n         faceOverlay.style.top = '59px';\n         faceOverlay.style.left = '107px';\n         faceOverlay.style.border = 'solid';\n\n         document.body.appendChild(overlay);\n         document.body.appendChild(faceOverlay);\n\n         canvas.width = window.innerWidth;\n         canvas.height = window.innerHeight;\n         canvas.style.position = 'fixed';\n\n         var cl = webgazer.getTracker().clm;\n\n         //This function draw the face of the user frame.\n         function drawLoop() {\n             requestAnimFrame(drawLoop);\n             overlay.getContext('2d').clearRect(0,0,width,height);\n             if (cl.getCurrentPosition()) {\n                 cl.draw(overlay);\n             }\n         }\n         drawLoop();\n     };\n\n     function checkIfReady() {\n         if (webgazer.isReady()) {\n             setup();\n         } else {\n             setTimeout(checkIfReady, 100);\n         }\n     }\n     setTimeout(checkIfReady, 100);\n   }\n}\n","import webgazerSetup from './webgazer/setup'\nimport {startSpeechText, stopSpeechText, setBodyListener} from './speech-to-text/controls'\nimport startCalibration from './calibration/controls'\nimport constants from './constants'\n\nwindow.onload = () => {\n  if(constants.enableSpeechNavigation) {\n    speechRunner();\n  } else {\n    webgazerRunner();\n  }\n}\n\nlet speechRunner = () => {\n  setBodyListener();\n}\n\nlet webgazerRunner = () => {\n  if(typeof(window.webgazer) === 'undefined') {\n    throw new Error(\"webgazer not found!\");\n  } else {\n    webgazerSetup(window, window.webgazer);\n  }\n\n  let calibrateButton = document.querySelector(\"#calibrate\")\n\n  if(calibrateButton) {\n    document.addEventListener('click', startCalibration(window.webgazer));\n  }\n\n  /*\n   * Bind speech to text to all elements on page load\n   */\n  let speechToTextElements = document.querySelectorAll(\"input[type='text'], textarea\");\n  for (let i = 0; i < speechToTextElements.length; i++) {\n    let element = speechToTextElements[i];\n    element.onfocus = () => {\n      startSpeechText(element, false, true);\n      element.onblur = () => stopSpeechText();\n    }\n  }\n}\n"],"sourceRoot":""}