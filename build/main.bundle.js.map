{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/speech-to-text/controls.js","webpack:///./src/speech-to-text/keywords.js","webpack:///./src/constants.js","webpack:///./src/calibration/controls.js","webpack:///./src/speech-to-text/onend.js","webpack:///./src/speech-to-text/onerror.js","webpack:///./src/tabbable/index.js","webpack:///./src/speech-to-text/onresult.js","webpack:///./src/speech-to-text/onstart.js","webpack:///./src/webgazer/precision_store_points.js","webpack:///./src/webgazer/setup.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","recog","startSpeechText","element","continuous","interim","stopSpeechText","webkitSpeechRecognition","grammars","webkitSpeechGrammarList","interimResults","onstart","_onstart2","default","onerror","_onerror2","onresult","_onresult2","onend","_onend2","lang","start","stop","setBodyListener","document","body","k","_keywords2","map","a","key","join","console","log","addFromString","_index","_controls","currentIndex","action","tabs","_index2","nextIndex","length","focus","window","scrollBy","click","style","border","history","back","enableSpeechNavigation","textField","dot","running","dotTop","parseInt","top","dotLeft","left","counter","dir","cleanup","removeChild","undefined","webgazer","createElement","innerText","position","appendChild","width","height","backgroundColor","borderRadius","updateDotPosition","setTimeout","innerWidth","innerHeight","recordScreenPosition","el","options","candidate","candidateIndex","elementDocument","ownerDocument","basicTabbables","orderedTabbables","isUnavailable","isOffCache","node","documentElement","computedStyle","defaultView","getComputedStyle","isOff","nodeComputedStyle","result","display","parentNode","push","visibility","createIsUnavailable","candidateSelectors","candidates","querySelectorAll","includeContainer","matches","Element","msMatchesSelector","webkitMatchesSelector","some","candidateSelector","Array","slice","apply","unshift","getAttribute","tabIndex","tagName","type","disabled","index","tabbableNodes","sort","b","_keywords","lastResult","event","resultIndex","results","transcript","temp","replace","word","find","indexOf","store_points_var","xPast50","yPast50","store_points_variable","stop_storing_points_variable","store_points","x","y","get_points","past50","_precision_store_points","_precision_store_points2","canvas","getElementById","setRegression","setTracker","setGazeListener","data","clock","begin","removeMouseEventListeners","showPredictionPoints","setup","video","margin","background","params","imgWidth","imgHeight","overlay","id","faceOverlay","cl","getTracker","clm","drawLoop","requestAnimFrame","getContext","clearRect","getCurrentPosition","draw","checkIfReady","isReady","onload","_constants2","speechRunner","webgazerRunner","Error","_setup2","querySelector","addEventListener","_controls3","speechToTextElements","_loop","onfocus","onblur"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","import onstart from './onstart'\nimport onresult from './onresult'\nimport onerror from './onerror'\nimport onend from './onend'\nimport keywords from './keywords'\n\nlet recog\n\nlet startSpeechText = (element, continuous, interim) => {\n  if(recog) { stopSpeechText(); }\n\n  recog = new webkitSpeechRecognition();\n  recog.grammars = new webkitSpeechGrammarList();\n  recog.continuous = continuous;\n  recog.interimResults = interim;\n\n  recog.onstart = onstart(element);\n  recog.onerror = onerror(element);\n  recog.onresult = onresult(element);\n  recog.onend = onend(element);\n\n  recog.lang = \"en-GB\";\n  recog.start();\n\n  return recog;\n}\n\nlet stopSpeechText = () => {\n  recog.stop();\n}\n\nlet setBodyListener = () => {\n  let recog = startSpeechText(document.body, true, true);\n\n  let k = '#JSGF V1.0; grammar actions; public <actions> = ' +\n    keywords.map(a => a.key).join(' | ') + ';';\nconsole.log(k)\n  let grammars = new webkitSpeechGrammarList();\n  grammars.addFromString(k, 1);\n  recog.grammars = grammars;\n}\n\nexport { startSpeechText, stopSpeechText, setBodyListener }\n","import tabbable from '../tabbable/index'\nimport { startSpeechText, setBodyListener } from './controls'\n\nlet currentIndex = -1;\n\nexport default [{\n  key: \"next\",\n  action: () => {\n    let tabs = tabbable(document.body)\n    let nextIndex = ++currentIndex\n\n    if(nextIndex > tabs.length - 1) {\n      currentIndex = nextIndex = 0\n    }\n\n    tabs[nextIndex].focus();\n  }\n}, {\n  key: \"previous\",\n  action: () => {\n    let tabs = tabbable(document.body)\n    let nextIndex = --currentIndex\n\n    if(nextIndex < 0) {\n      currentIndex = nextIndex = tabs.length - 1\n    }\n\n    tabs[nextIndex].focus();\n  }\n}, {\n  key: \"scroll up\",\n  action: () => {\n    window.scrollBy(0, -200)\n  }\n}, {\n  key: \"scroll down\",\n  action: () => {\n    window.scrollBy(0, 200)\n  }\n}, {\n  key: \"click\",\n  action: () => {\n    let element = tabbable(document.body)[currentIndex]\n\n    if(element) {\n      element.click()\n    }\n  }\n}, {\n  key: \"edit\",\n  action: () => {\n    let element = tabbable(document.body)[currentIndex]\n\n    if(element) {\n      element.focus();\n      element.style.border = \"1px solid yellow\"\n      startSpeechText(element, false, true);\n    }\n  }\n}, {\n  key: \"back\",\n  action: () => window.history.back()\n}]\n","let enableSpeechNavigation = true;\n\nexport default { enableSpeechNavigation }\n","let textField;\nlet dot;\nlet running = false;\n\nlet dotTop = () => dot ? parseInt(dot.style.top) : 0\nlet dotLeft = () => dot ? parseInt(dot.style.left) : 0\n\nlet speed = 15;\nlet maxIterations = 4\nlet counter = 0;\n\nlet spawnRedDot = () => {\n  if (!dot) {\n    dot = document.createElement('div');\n    dot.style.width = \"20px\"\n    dot.style.height = \"20px\"\n    dot.style.position = 'fixed'\n    dot.style.left = \"10px\"\n    dot.style.top = \"10px\"\n    dot.style.backgroundColor = 'red'\n    dot.style.borderRadius = '50%'\n\n    document.body.appendChild(dot)\n  }\n\n  return dot\n}\n\nlet dir = \"right\"\nlet updateDotPosition = (webgazer) => () => {\n  if(counter >= maxIterations) {\n    dot.style.backgroundColor = 'green'\n    setTimeout(cleanup, 2500)\n    return;\n  }\n\n  if(dot) {\n    if(dotLeft() >= window.innerWidth - 50 && dir == \"right\") {\n      dir = \"down\"\n      counter++\n    } else if(dotTop() >= window.innerHeight - 50 && dir == \"down\") {\n      dir = \"left\"\n      counter++\n    } else if(dotLeft() <= 10 && dir == \"left\") {\n      dir = \"up\"\n      counter++\n    } else if(dotTop() <= 10 && dir == \"up\") {\n      dir = \"right\"\n      counter++\n    }\n\n    switch (dir) {\n      case \"right\": dot.style.left = (dotLeft() + speed) + \"px\"; break;\n      case \"down\": dot.style.top = (dotTop() + speed) + \"px\"; break;\n      case \"left\": dot.style.left = (dotLeft() - speed) + \"px\"; break;\n      case \"up\": dot.style.top = (dotTop() - speed) + \"px\"; break;\n    }\n\n    webgazer.recordScreenPosition(dotLeft(), dotTop())\n  }\n\n  setTimeout(updateDotPosition(webgazer), 75)\n}\n\nlet cleanup = () => {\n  running = false;\n  counter = 0;\n  document.body.removeChild(textField);\n  document.body.removeChild(dot);\n  textField = undefined\n  dot = undefined\n}\n\nexport default (webgazer) => () => {\n  if(!running) {\n    running = true;\n\n    if(!textField) {\n      textField = document.createElement(\"div\")\n      textField.innerText = \"Stare at the red dot, follow it with you eyes until it turns green\"\n      textField.style.position = \"fixed\"\n      textField.style.top = \"50%\"\n      textField.style.left = \"50%\"\n\n      document.body.appendChild(textField);\n    }\n\n    spawnRedDot()\n    updateDotPosition(webgazer)()\n  }\n}\n","import { setBodyListener } from './controls'\n\nexport default (element) => () => {\n  console.log(\"ending listener\", element)\n  if(element != document.body) {\n    console.log(\"setup body listener\")\n    setBodyListener()\n  }\n}\n","export default (element) => () => {}\n","export default function(el, options) {\n  options = options || {};\n\n  var elementDocument = el.ownerDocument || el;\n  var basicTabbables = [];\n  var orderedTabbables = [];\n\n  // A node is \"available\" if\n  // - it's computed style\n  var isUnavailable = createIsUnavailable(elementDocument);\n\n  var candidateSelectors = [\n    'input',\n    'select',\n    'a[href]',\n    'textarea',\n    'button',\n    '[tabindex]',\n  ];\n\n  var candidates = el.querySelectorAll(candidateSelectors.join(','));\n\n  if (options.includeContainer) {\n    var matches = Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\n    if (\n      candidateSelectors.some(function(candidateSelector) {\n        return matches.call(el, candidateSelector);\n      })\n    ) {\n      candidates = Array.prototype.slice.apply(candidates);\n      candidates.unshift(el);\n    }\n  }\n\n  var candidate, candidateIndex;\n  for (var i = 0, l = candidates.length; i < l; i++) {\n    candidate = candidates[i];\n    candidateIndex = parseInt(candidate.getAttribute('tabindex'), 10) || candidate.tabIndex;\n\n    if (\n      candidateIndex < 0\n      || (candidate.tagName === 'INPUT' && candidate.type === 'hidden')\n      || candidate.disabled\n      || isUnavailable(candidate, elementDocument)\n    ) {\n      continue;\n    }\n\n    if (candidateIndex === 0) {\n      basicTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        index: i,\n        tabIndex: candidateIndex,\n        node: candidate,\n      });\n    }\n  }\n\n  var tabbableNodes = orderedTabbables\n    .sort(function(a, b) {\n      return a.tabIndex === b.tabIndex ? a.index - b.index : a.tabIndex - b.tabIndex;\n    })\n    .map(function(a) {\n      return a.node\n    });\n\n  Array.prototype.push.apply(tabbableNodes, basicTabbables);\n\n  return tabbableNodes;\n}\n\nfunction createIsUnavailable(elementDocument) {\n  // Node cache must be refreshed on every check, in case\n  // the content of the element has changed\n  var isOffCache = [];\n\n  // \"off\" means `display: none;`, as opposed to \"hidden\",\n  // which means `visibility: hidden;`. getComputedStyle\n  // accurately reflects visiblity in context but not\n  // \"off\" state, so we need to recursively check parents.\n\n  function isOff(node, nodeComputedStyle) {\n    if (node === elementDocument.documentElement) return false;\n\n    // Find the cached node (Array.prototype.find not available in IE9)\n    for (var i = 0, length = isOffCache.length; i < length; i++) {\n      if (isOffCache[i][0] === node) return isOffCache[i][1];\n    }\n\n    nodeComputedStyle = nodeComputedStyle || elementDocument.defaultView.getComputedStyle(node);\n\n    var result = false;\n\n    if (nodeComputedStyle.display === 'none') {\n      result = true;\n    } else if (node.parentNode) {\n      result = isOff(node.parentNode);\n    }\n\n    isOffCache.push([node, result]);\n\n    return result;\n  }\n\n  return function isUnavailable(node) {\n    if (node === elementDocument.documentElement) return false;\n\n    var computedStyle = elementDocument.defaultView.getComputedStyle(node);\n\n    if (isOff(node, computedStyle)) return true;\n\n    return computedStyle.visibility === 'hidden';\n  }\n}\n","import keywords from './keywords'\n\nlet lastResult = \"\"\n\nexport default (element) => (event) => {\n  var interim = '';\n\n  for(var i = event.resultIndex; i < event.results.length; ++i) {\n    interim += event.results[i][0].transcript;\n  }\n\n  if(element == document.body) {\n    let temp = interim;\n    interim = interim.replace(lastResult, \"\");\n    lastResult = temp;\n\n    console.log(temp, interim)\n\n    var word = keywords.find(i => interim.indexOf(i.key) > -1)\n\n    if(word)\n    {\n      console.log(word.key);\n      word.action();\n    }\n  } else {\n    element.value = interim;\n  }\n}\n","export default (element) => () => {}\n","export default (window) => {\n  window.store_points_var = false;\n  window.xPast50 = new Array(50);\n  window.yPast50 = new Array(50);\n\n  /*\n   * Sets store_points to true, so all the occuring prediction\n   * points are stored\n   */\n  window.store_points_variable = function(){\n    store_points_var = true;\n  }\n\n  /*\n   * Sets store_points to false, so prediction points aren't\n   * stored any more\n   */\n  window.stop_storing_points_variable = function(){\n    store_points_var = false;\n  }\n\n  /*\n   * Stores the position of the fifty most recent tracker preditions\n   */\n  window.store_points = function(x, y, k) {\n    xPast50[k] = x;\n    yPast50[k] = y;\n  }\n\n  /*\n   * Returns the stored tracker prediction points\n   */\n  window.get_points = function() {\n    var past50 = new Array(2);\n    past50[0] = xPast50;\n    past50[1] = yPast50;\n    return past50;\n  }\n}\n","import precision_store_points from './precision_store_points'\n\nexport default (window, webgazer) => {\n  precision_store_points(window);\n\n  var canvas = document.getElementById(\"plotting_canvas\");\n\n  if(canvas) {\n    //start the webgazer tracker\n     webgazer.setRegression('ridge') /* currently must set regression and tracker */\n         .setTracker('clmtrackr')\n         .setGazeListener(function(data, clock) {\n           //   console.log(data); /* data is an object containing an x and y key which are the x and y prediction coordinates (no bounds limiting) */\n           //   console.log(clock); /* elapsed time in milliseconds since webgazer.begin() was called */\n         })\n         .begin()\n         .removeMouseEventListeners()\n         .showPredictionPoints(true); /* shows a square every 100 milliseconds where current prediction is */\n\n     var width = 320;\n     var height = 240;\n     var topDist = '0px';\n     var leftDist = '0px';\n\n     //Set up the webgazer video feedback.\n     var setup = function() {\n         //Set up video variable to store the camera feedback\n         var video = document.getElementById('webgazerVideoFeed');\n\n         //Position the camera feedback to the top left corner.\n         video.style.display = 'block';\n         video.style.position = 'fixed';\n         video.style.top = topDist;\n         video.style.left = leftDist;\n\n         //Set up the video feedback box size\n         video.width = width;\n         video.height = height;\n         video.style.margin = '0px';\n         video.style.background = '#222222';\n         webgazer.params.imgWidth = width;\n         webgazer.params.imgHeight = height;\n\n         //Set up the main canvas. The main canvas is used to calibrate the webgazer.\n         var overlay = document.createElement('canvas');\n         overlay.id = 'overlay';\n\n         //Setup the size of canvas\n         overlay.style.position = 'fixed';\n         overlay.width = width;\n         overlay.height = height;\n         overlay.style.top = topDist;\n         overlay.style.left = leftDist;\n         overlay.style.margin = '0px';\n\n         //Draw the face overlay on the camera video feedback\n         var faceOverlay = document.createElement('face_overlay');\n         faceOverlay.id = 'faceOverlay';\n         faceOverlay.style.position = 'fixed';\n         faceOverlay.style.top = '59px';\n         faceOverlay.style.left = '107px';\n         faceOverlay.style.border = 'solid';\n\n         document.body.appendChild(overlay);\n         document.body.appendChild(faceOverlay);\n\n         canvas.width = window.innerWidth;\n         canvas.height = window.innerHeight;\n         canvas.style.position = 'fixed';\n\n         var cl = webgazer.getTracker().clm;\n\n         //This function draw the face of the user frame.\n         function drawLoop() {\n             requestAnimFrame(drawLoop);\n             overlay.getContext('2d').clearRect(0,0,width,height);\n             if (cl.getCurrentPosition()) {\n                 cl.draw(overlay);\n             }\n         }\n         drawLoop();\n     };\n\n     function checkIfReady() {\n         if (webgazer.isReady()) {\n             setup();\n         } else {\n             setTimeout(checkIfReady, 100);\n         }\n     }\n     setTimeout(checkIfReady, 100);\n   }\n}\n","import webgazerSetup from './webgazer/setup'\nimport {startSpeechText, stopSpeechText, setBodyListener} from './speech-to-text/controls'\nimport startCalibration from './calibration/controls'\nimport constants from './constants'\n\nwindow.onload = () => {\n  if(constants.enableSpeechNavigation) {\n    speechRunner();\n  } else {\n    webgazerRunner();\n  }\n}\n\nlet speechRunner = () => {\n  setBodyListener();\n}\n\nlet webgazerRunner = () => {\n  if(typeof(window.webgazer) === 'undefined') {\n    throw new Error(\"webgazer not found!\");\n  } else {\n    webgazerSetup(window, window.webgazer);\n  }\n\n  let calibrateButton = document.querySelector(\"#calibrate\")\n\n  if(calibrateButton) {\n    document.addEventListener('click', startCalibration(window.webgazer));\n  }\n\n  /*\n   * Bind speech to text to all elements on page load\n   */\n  let speechToTextElements = document.querySelectorAll(\"input[type='text'], textarea\");\n  for (let i = 0; i < speechToTextElements.length; i++) {\n    let element = speechToTextElements[i];\n    element.onfocus = () => {\n      startSpeechText(element, false, true);\n      element.onblur = () => stopSpeechText();\n    }\n  }\n}\n"],"sourceRoot":""}